<!-- Generated by galley: do not edit by hand -->

## Introduction

This guide will demonstrate how to use {fledge}, using a mock R package
as an example. We are going to call our package “{SuperFrob}”. We will
develop it from scratch and also maintain a changelog as the development
progresses. Finally, we will demonstrate how this changelog can
eventually be converted to release notes when the package is submitted
to CRAN.

## Set up the development environment

Before we start development for {SuperFrob}, we set up the basic
development environment required for any typical R package.

### Create a package

We will start by creating a new package. For this demo, the package is
created in a temporary directory. A real project will live somewhere in
your home directory.

``` r
tempdir <- tempfile("fledge")
dir.create(tempdir)
```

The `usethis::create_package()` function sets up a package project ready
for development. The output shows the details of the package created.

``` r
pkg <- usethis::create_package(file.path(tempdir, "SuperFrob"))
```

In an interactive RStudio session, a new window opens. Users of other
environments would change the working directory manually. For this demo,
we manually set the active project.

``` r
usethis::proj_set()
```

The infrastructure files and directories that comprise a minimal R
package are created:

``` r
fs::dir_tree()
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #0000BB;font-weight: bold;'>.</span><span>
## ├── DESCRIPTION
## ├── NAMESPACE
## └── </span><span style='color: #0000BB;font-weight: bold;'>R</span><span>
</span></CODE></PRE>

### Create and configure a Git repository

Next we set up this package for development and create a Git repository
for the package.

``` r
usethis::use_git()
```

In interactive mode, the `usethis::use_git()` function creates an
initial commit, and the repository is in a clean state. In the demo this
needs to be carried out manually.

``` r
gert::git_add(files = ".")
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 3 x 3</span><span>
##   file        status staged
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> 
## </span><span style='color: #555555;'>1</span><span> .gitignore  new    TRUE  
## </span><span style='color: #555555;'>2</span><span> DESCRIPTION new    TRUE  
## </span><span style='color: #555555;'>3</span><span> NAMESPACE   new    TRUE
</span></CODE></PRE>

``` r
gert::git_commit(message = "Initial commit.")
```

    ## [1] "ab1d8c3180c6ac8064476d4472593800c6ead368"

``` r
gert::git_log()
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 1 x 6</span><span>
##   commit                author      time                files merge message     
## </span><span style='color: #555555;'>*</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>                 </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;dttm&gt;</span><span>              </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>       
## </span><span style='color: #555555;'>1</span><span> ab1d8c3180c6ac806447… Test &lt;test… 2021-03-09 </span><span style='color: #555555;'>11:03:34</span><span>     3 FALSE </span><span style='color: #555555;'>"</span><span>Initial co…
</span></CODE></PRE>

``` r
gert::git_status()
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 0 x 3</span><span>
## </span><span style='color: #555555;'># … with 3 variables: file &lt;chr&gt;, status &lt;chr&gt;, staged &lt;lgl&gt;</span><span>
</span></CODE></PRE>

For working in branches, it is recommended to turn off fast-forward
merging:

``` r
gert::git_config_set("merge.ff", "false")
```

An alternative is to use squash commits.

### Create initial NEWS.md file

An initial NEWS file can be created with `usethis::use_news_md()`.

``` r
usethis::use_news_md()
```

Let’s take a look at the contents:

``` r
news <- readLines(usethis::proj_path("NEWS.md"))
cat(news, sep = "\n")
```

    ## # SuperFrob 0.0.0.9000
    ## 
    ## * Added a `NEWS.md` file to track changes to the package.

This file needs to be tracked by Git:

``` r
gert::git_add(files = ".")
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 1 x 3</span><span>
##   file    status staged
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> 
## </span><span style='color: #555555;'>1</span><span> NEWS.md new    TRUE
</span></CODE></PRE>

``` r
gert::git_status()
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 1 x 3</span><span>
##   file    status staged
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> 
## </span><span style='color: #555555;'>1</span><span> NEWS.md new    TRUE
</span></CODE></PRE>

``` r
gert::git_commit(message = "Initial NEWS.md .")
```

    ## [1] "c943365a39a448084e08243a74c94de9f44735ac"

## The development phase

### Create an R file

Now we start coding in the functionality for the package. We start by
creating the new R file called `super.R` and adding frobnication code.

``` r
usethis::use_r("super")
writeLines("# frobnicate", "R/super.R")
```

We commit this file to Git with a relevant message. Note the use of the
bullet (-) before the commit message. This indicates that the message
should be included in `NEWS.md` when it is updated.

``` r
gert::git_add(files = ".")
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 1 x 3</span><span>
##   file      status staged
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>     </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> 
## </span><span style='color: #555555;'>1</span><span> R/super.R new    TRUE
</span></CODE></PRE>

``` r
gert::git_commit(message = "- Add support for frobmication.")
```

    ## [1] "49141855eae66bdeb946360749627f6a7d147639"

### Create a test

The code in `super.R` warrants a test:

``` r
usethis::use_test("super")
cat(readLines("tests/testthat/test-super.R"), sep = "\n")
```

    ## test_that("multiplication works", {
    ##   expect_equal(2 * 2, 4)
    ## })

In a real project we would substitute the testing code from the template
by real tests. In this demo we commit straight away, again with a
bulleted message.

``` r
gert::git_add(files = ".")
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 3 x 3</span><span>
##   file                        status   staged
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>                       </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> 
## </span><span style='color: #555555;'>1</span><span> DESCRIPTION                 modified TRUE  
## </span><span style='color: #555555;'>2</span><span> tests/testthat.R            new      TRUE  
## </span><span style='color: #555555;'>3</span><span> tests/testthat/test-super.R new      TRUE
</span></CODE></PRE>

``` r
gert::git_status()
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 3 x 3</span><span>
##   file                        status   staged
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>                       </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> 
## </span><span style='color: #555555;'>1</span><span> DESCRIPTION                 modified TRUE  
## </span><span style='color: #555555;'>2</span><span> tests/testthat.R            new      TRUE  
## </span><span style='color: #555555;'>3</span><span> tests/testthat/test-super.R new      TRUE
</span></CODE></PRE>

``` r
gert::git_commit(message = "- Add tests for frobnication.")
```

    ## [1] "b9a8ab1edf3b11164aa798c35e23378c48b68c46"

### Update NEWS.md

We use `fledge::bump_version()` to assign a new dev version number to
the package and also update `NEWS.md`.

``` r
fledge::bump_version()
```

<PRE class="fansi fansi-message"><CODE>## → Scraping <span style='color: #00BB00;'>0</span><span> commit messages.
</span></CODE></PRE>
<PRE class="fansi fansi-message"><CODE>## <span style='color: #00BB00;'>✓</span><span> Found </span><span style='color: #00BB00;'>1</span><span> NEWS-worthy entries.
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Updating NEWS</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## → Adding new entries to <span style='color: #0000BB;'>NEWS.md</span><span>.
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Updating Version</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## <span style='color: #00BB00;'>✓</span><span> Package version bumped to </span><span style='color: #00BB00;'>0.0.0.9001</span><span>.
</span></CODE></PRE>
<PRE class="fansi fansi-message"><CODE>## → Adding header to <span style='color: #0000BB;'>NEWS.md</span><span>.
</span></CODE></PRE>

    ## → Committing changes.

    ## 

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Tagging Version</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## → Creating tag <span style='color: #00BB00;'>v0.0.0.9001</span><span> with tag message derived from </span><span style='color: #0000BB;'>NEWS.md</span><span>.
</span></CODE></PRE>
<PRE class="fansi fansi-message"><CODE>## <span style='color: #BBBB00;'>!</span><span> Call </span><span style='color: #000000;background-color: #BBBBBB;'>`fledge::finalize_version(push = TRUE)`</span><span>.
</span></CODE></PRE>

    ## 

### Review NEWS.md

Let us see what `NEWS.md` looks like after that bump.

``` r
news <- readLines("NEWS.md")
cat(news, sep = "\n")
```

    ## # SuperFrob 0.0.0.9001
    ## 
    ## - Same as previous version.
    ## 
    ## 
    ## # SuperFrob 0.0.0.9000
    ## 
    ## * Added a `NEWS.md` file to track changes to the package.

While reviewing we notice that there was a typo in one of the comments.
Let’s fix the typo:

``` r
news <- gsub("frobmication", "frobnication", news)
cat(news, sep = "\n")
```

    ## # SuperFrob 0.0.0.9001
    ## 
    ## - Same as previous version.
    ## 
    ## 
    ## # SuperFrob 0.0.0.9000
    ## 
    ## * Added a `NEWS.md` file to track changes to the package.

``` r
writeLines(news, "NEWS.md")
```

This does not affect the original commit message, only `NEWS.md`.

### Finalize version

After tweaking `NEWS.md`, it is important to use
`fledge::finalize_version()` and not to commit manually. This ensures
that the tag is set to the correct version in spite of the `NEWS.md`
update. It should be called every time `NEWS.md` is manually updated.

``` r
fledge::finalize_version()
```

    ## → Resetting to previous commit.

    ## → Committing changes.

    ## 

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Tagging Version</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## → Deleting tag <span style='color: #00BB00;'>v0.0.0.9001</span><span>.
</span></CODE></PRE>
<PRE class="fansi fansi-message"><CODE>## → Creating tag <span style='color: #00BB00;'>v0.0.0.9001</span><span> with tag message derived from </span><span style='color: #0000BB;'>NEWS.md</span><span>.
</span></CODE></PRE>

When done, we push to the *remote* (GitHub or another Git service) with
tags using `fledge::finalize_version(push = TRUE)`, as advised. In this
demo, no remote repository is set up, and the push process is not shown.

### Change code and commit

{SuperFrob} with frobnication is tested, now we want to enhance with
super-frob. This requires changes to the code, and perhaps a new test.
We create a branch and switch to this branch to implement this.

``` r
default_branch <- gert::git_info()$shorthand
gert::git_branch_create(branch = "f-super-frob")
```

On the branch, separate commits are used for the tests and the
implementation. These commit messages do not need to be formatted
specially, because {fledge} will ignore them anyway.

``` r
usethis::use_test("frob")
gert::git_add(files = ".")
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 1 x 3</span><span>
##   file                       status staged
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>                      </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> 
## </span><span style='color: #555555;'>1</span><span> tests/testthat/test-frob.R new    TRUE
</span></CODE></PRE>

``` r
gert::git_status()
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 1 x 3</span><span>
##   file                       status staged
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>                      </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> 
## </span><span style='color: #555555;'>1</span><span> tests/testthat/test-frob.R new    TRUE
</span></CODE></PRE>

``` r
gert::git_commit(message = "Add super-frob tests.")
```

    ## [1] "b748aa30f64157478d1d5b8a8de237c645eecd96"

``` r
usethis::use_r("frob")
writeLines("# super-frob", "R/frob.R")
gert::git_add(files = ".")
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 1 x 3</span><span>
##   file     status staged
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> 
## </span><span style='color: #555555;'>1</span><span> R/frob.R new    TRUE
</span></CODE></PRE>

``` r
gert::git_status()
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 1 x 3</span><span>
##   file     status staged
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> 
## </span><span style='color: #555555;'>1</span><span> R/frob.R new    TRUE
</span></CODE></PRE>

``` r
gert::git_commit(message = "Add super-frob implementation.")
```

    ## [1] "699df708d07d719e454b9285c3be4d9c318033f1"

This branch can be pushed to the remote as usual. Only when merging we
specify the message to be included in the changelog, again with a
bullet.[1]

``` r
gert::git_branch_checkout(default_branch)
```

    ## <git repository>: /private/var/folders/wp/vf2dpq8j02xd0pw15rz4qqkm0000gn/T/RtmpECjGZl/fledgeb8ed6aecd281/SuperFrob[@main]

``` r
gert::git_merge("f-super-frob", commit = FALSE)
```

    ## Merge was not committed due to merge conflict(s). Please fix and run git_commit() or git_merge_abort()

    ## NULL

``` r
gert::git_status()
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 2 x 3</span><span>
##   file                       status staged
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>                      </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> 
## </span><span style='color: #555555;'>1</span><span> R/frob.R                   new    TRUE  
## </span><span style='color: #555555;'>2</span><span> tests/testthat/test-frob.R new    TRUE
</span></CODE></PRE>

``` r
gert::git_commit(message = "- Super-frobnication enabled.")
```

    ## [1] "066531e79d4916b1c634c5d27307ff0f508a8364"

The same strategy can be used when merging a pull/merge/… request on
GitHub, GitLab, …: use bullet points in the merge commit message to
indicate the items to include in `NEWS.md`.

Now that we have added super-frobnication support to our package, it is
time to bump the version again.

``` r
fledge::bump_version()
```

<PRE class="fansi fansi-message"><CODE>## → Scraping <span style='color: #00BB00;'>1</span><span> commit messages.
</span></CODE></PRE>
<PRE class="fansi fansi-message"><CODE>## <span style='color: #00BB00;'>✓</span><span> Found </span><span style='color: #00BB00;'>1</span><span> NEWS-worthy entries.
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Updating NEWS</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## → Adding new entries to <span style='color: #0000BB;'>NEWS.md</span><span>.
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Updating Version</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## <span style='color: #00BB00;'>✓</span><span> Package version bumped to </span><span style='color: #00BB00;'>0.0.0.9002</span><span>.
</span></CODE></PRE>
<PRE class="fansi fansi-message"><CODE>## → Adding header to <span style='color: #0000BB;'>NEWS.md</span><span>.
</span></CODE></PRE>

    ## → Committing changes.

    ## 

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Tagging Version</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## → Creating tag <span style='color: #00BB00;'>v0.0.0.9002</span><span> with tag message derived from </span><span style='color: #0000BB;'>NEWS.md</span><span>.
</span></CODE></PRE>
<PRE class="fansi fansi-message"><CODE>## <span style='color: #BBBB00;'>!</span><span> Call </span><span style='color: #000000;background-color: #BBBBBB;'>`fledge::finalize_version(push = TRUE)`</span><span>.
</span></CODE></PRE>

    ## 

``` r
news <- readLines("NEWS.md")
cat(news, sep = "\n")
```

    ## # SuperFrob 0.0.0.9002
    ## 
    ## - Super-frobnication enabled.
    ## 
    ## 
    ## # SuperFrob 0.0.0.9001
    ## 
    ## - Same as previous version.
    ## 
    ## 
    ## # SuperFrob 0.0.0.9000
    ## 
    ## * Added a `NEWS.md` file to track changes to the package.

## Prepare for release

After multiple cycles of development, review and testing, we decide that
our package is ready for release to CRAN. This is where {fledge}
simplifies the release process by making use of the all the commit
messages that we provided earlier.

### Bump version for release

We wish to release this package as a patch and so we use
`fledge::bump_version()` with the “patch” argument.

``` r
fledge::bump_version("patch")
```

<PRE class="fansi fansi-message"><CODE>## → Scraping <span style='color: #00BB00;'>1</span><span> commit messages.
</span></CODE></PRE>
<PRE class="fansi fansi-message"><CODE>## <span style='color: #00BB00;'>✓</span><span> Found </span><span style='color: #00BB00;'>1</span><span> NEWS-worthy entries.
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Updating NEWS</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## → Adding new entries to <span style='color: #0000BB;'>NEWS.md</span><span>.
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Updating Version</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## <span style='color: #00BB00;'>✓</span><span> Package version bumped to </span><span style='color: #00BB00;'>0.0.1</span><span>.
</span></CODE></PRE>
<PRE class="fansi fansi-message"><CODE>## → Adding header to <span style='color: #0000BB;'>NEWS.md</span><span>.
</span></CODE></PRE>

    ## → Committing changes.

    ## 

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Preparing package for CRAN release</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## ● Convert the changelog in <span style='color: #0000BB;'>NEWS.md</span><span> to release notes.
</span></CODE></PRE>

    ## 

This updates the version of our package to 0.0.4.

### Generate release notes

We review the `NEWS.md` that were generated by {fledge}:

``` r
news <- readLines("NEWS.md")
cat(news, sep = "\n")
```

    ## # SuperFrob 0.0.1
    ## 
    ## - Internal changes only.
    ## 
    ## 
    ## # SuperFrob 0.0.0.9002
    ## 
    ## - Super-frobnication enabled.
    ## 
    ## 
    ## # SuperFrob 0.0.0.9001
    ## 
    ## - Same as previous version.
    ## 
    ## 
    ## # SuperFrob 0.0.0.9000
    ## 
    ## * Added a `NEWS.md` file to track changes to the package.

Some of the intermediate commit messages are not relevant in the release
notes for this release. We need to edit `NEWS.md` to convert the
changelog to meaningful release notes.

``` r
length(news) <- 5
news[3:5] <- c(
  "Initial CRAN release.",
  "",
  "Basic functionality: Super-frobnication."
)
cat(news, sep = "\n")
```

    ## # SuperFrob 0.0.1
    ## 
    ## Initial CRAN release.
    ## 
    ## Basic functionality: Super-frobnication.

``` r
writeLines(news, "NEWS.md")
```

Unlike with development versions, we commit the changes to `NEWS.md`
manually:

``` r
gert::git_add(files = ".")
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 1 x 3</span><span>
##   file    status   staged
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> 
## </span><span style='color: #555555;'>1</span><span> NEWS.md modified TRUE
</span></CODE></PRE>

``` r
gert::git_status()
```

<PRE class="fansi fansi-output"><CODE>## <span style='color: #555555;'># A tibble: 1 x 3</span><span>
##   file    status   staged
##   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> 
## </span><span style='color: #555555;'>1</span><span> NEWS.md modified TRUE
</span></CODE></PRE>

``` r
gert::git_commit(message = "Update NEWS.")
```

    ## [1] "ce3da155af093eacbf9be19ac894153b07a83299"

The package is now ready to be released to CRAN. I prefer
`devtools::use_release_issue()` to create a checklist of things to do
before release, and `devtools::submit_cran()` to submit. The
`devtools::release()` function is a more verbose alternative.

## After release

Some time passed and our {SuperFrob} package was accepted on CRAN. At
this stage, {fledge} can help to tag the released version and create a
new version for development.

### Tag version

It is now the time to tag the released version using the
`fledge::tag_version()` function.

``` r
fledge::tag_version()
```

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Tagging Version</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## → Creating tag <span style='color: #00BB00;'>v0.0.1</span><span> with tag message derived from </span><span style='color: #0000BB;'>NEWS.md</span><span>.
</span></CODE></PRE>

It is advised to push to remote, with `git push --tags` from the command
line, or your favorite Git client.

### Create GitHub release

If your package is hosted on GitHub, `usethis::use_github_release()`
creates a draft GitHub release from the contents already in `NEWS.md`.
You need to submit the draft release from the GitHub release page.

### Restart development

We will now make the package ready for future development. The
`fledge::bump_version()` takes care of it.

``` r
fledge::bump_version()
```

<PRE class="fansi fansi-message"><CODE>## → Scraping <span style='color: #00BB00;'>1</span><span> commit messages.
</span></CODE></PRE>
<PRE class="fansi fansi-message"><CODE>## <span style='color: #00BB00;'>✓</span><span> Found </span><span style='color: #00BB00;'>1</span><span> NEWS-worthy entries.
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Updating NEWS</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## → Adding new entries to <span style='color: #0000BB;'>NEWS.md</span><span>.
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Updating Version</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## <span style='color: #00BB00;'>✓</span><span> Package version bumped to </span><span style='color: #00BB00;'>0.0.1.9000</span><span>.
</span></CODE></PRE>
<PRE class="fansi fansi-message"><CODE>## → Adding header to <span style='color: #0000BB;'>NEWS.md</span><span>.
</span></CODE></PRE>

    ## → Committing changes.

    ## 

<PRE class="fansi fansi-message"><CODE>## ── <span style='font-weight: bold;'>Tagging Version</span><span> ──
</span></CODE></PRE>

    ## 

<PRE class="fansi fansi-message"><CODE>## → Creating tag <span style='color: #00BB00;'>v0.0.1.9000</span><span> with tag message derived from </span><span style='color: #0000BB;'>NEWS.md</span><span>.
</span></CODE></PRE>
<PRE class="fansi fansi-message"><CODE>## <span style='color: #BBBB00;'>!</span><span> Call </span><span style='color: #000000;background-color: #BBBBBB;'>`fledge::finalize_version(push = TRUE)`</span><span>.
</span></CODE></PRE>

    ## 

``` r
news <- readLines("NEWS.md")
cat(news, sep = "\n")
```

    ## # SuperFrob 0.0.1.9000
    ## 
    ## - Internal changes only.
    ## 
    ## 
    ## # SuperFrob 0.0.1
    ## 
    ## Initial CRAN release.
    ## 
    ## Basic functionality: Super-frobnication.

Push to remote.

[1] Note that we really need a merge commit here; the default is to
fast-forward which doesn’t give us the opportunity to insert the message
intended for the changelog. Earlier, we set the `merge.ff` config option
to `"false"` to achieve this.
